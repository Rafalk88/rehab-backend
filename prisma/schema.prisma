generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                      String    @id @default(uuid()) @db.Uuid
  login                   String    @unique
  email                   String    @unique
  password_hash           String
  is_active               Boolean   @default(true)
  is_locked               Boolean   @default(false)
  locked_until            DateTime? 
  failed_login_attempts   Int       @default(0)
  last_failed_login_at    DateTime?
  last_login_at           DateTime?
  password_changed_at     DateTime?
  password_changed_by     String?   @db.Uuid
  organizational_unit_id  String?   @db.Uuid
  sex_id                  String?   @db.Uuid
  first_name_id           String?   @db.Uuid
  surname_id              String?   @db.Uuid
  created_at              DateTime  @default(now())
  updated_at              DateTime  @default(now()) @updatedAt

  // Relacje (opcjonalnie, odkomentuj je≈õli masz modele):
  // passwordChangedBy User? @relation("PasswordChangedBy", fields: [password_changed_by], references: [id])
  // organizationalUnit OrganizationalUnit? @relation(fields: [organizational_unit_id], references: [id])
  // sex Sex? @relation(fields: [sex_id], references: [id])
  // firstName GivenName? @relation(fields: [first_name_id], references: [id])
  // surname Surname? @relation(fields: [surname_id], references: [id])
}